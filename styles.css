/* ========= MODERN DESIGN SYSTEM ========= */
:root{
  --bg:#0f172a;--card:#1e293b;--card-light:#334155;--surface:#475569;--text:#f8fafc;
  --text-muted:#cbd5e1;--text-subtle:#94a3b8;--primary:#15803d;--primary-light:#16a34a;
  --accent:#84cc16;--accent-light:#a3e635;--success:#10b981;--warning:#f59e0b;--error:#ef4444;--info:#3b82f6;
  --border:#334155;--border-light:#475569;--shadow:0 4px 6px -1px rgb(0 0 0/.1),0 2px 4px -2px rgb(0 0 0/.1);
  --shadow-lg:0 10px 15px -3px rgb(0 0 0/.1),0 4px 6px -4px rgb(0 0 0/.1);
  --font-primary:"Work Sans",system-ui,-apple-system,sans-serif;--font-secondary:"Open Sans",system-ui,-apple-system,sans-serif;
  --radius:12px;--radius-sm:8px;--radius-lg:16px;--hover:#334155;--primary-bg:#15803d;
}

/* ========= BASE ========= */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:var(--font-secondary)}
body{background:var(--bg);color:var(--text);font-size:14px;line-height:1.5;overflow:hidden;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}

/* ========= LOGIN ========= */
.login{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;background:linear-gradient(135deg,var(--bg) 0%,#1e293b 100%)}
.login-card{width:min(420px,92vw);background:var(--card);border:1px solid var(--border);border-radius:var(--radius-lg);padding:28px 32px 24px;box-shadow:var(--shadow-lg);backdrop-filter:blur(10px)}
.login-header{text-align:center;margin-bottom:18px}
.login-logo{display:flex;align-items:center;justify-content:center;margin-bottom:8px}
.login-logo img{width:320px;max-width:100%;height:auto;object-fit:contain;filter:drop-shadow(0 0 18px rgba(132,204,22,.35))}
.login h1{display:none!important}
.login-sub{margin:0;color:var(--text-muted);font-size:15px}
.login-form{display:flex;flex-direction:column;gap:20px}
.login-form .btn{width:100%!important;align-self:center}
.form-group{display:flex;flex-direction:column;gap:8px}
.form-group label{font-family:var(--font-primary);font-weight:600;color:var(--text-muted);font-size:14px}

/* ========= FORM ========= */
.inp{background:var(--card-light);color:var(--text);border:1px solid var(--border);border-radius:var(--radius);padding:14px 16px;font-size:14px;font-family:var(--font-secondary);transition:all .2s ease;width:100%}
.inp:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(21,128,61,.1);background:var(--surface)}
.inp::placeholder{color:var(--text-subtle)}
.inp-compact{flex:0 0 180px}.inp-main{flex:1}

/* ========= BUTTONS ========= */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 20px;border:1px solid var(--border);border-radius:var(--radius);background:var(--card-light);color:var(--text);font-family:var(--font-primary);font-weight:600;font-size:14px;cursor:pointer;transition:all .2s ease;text-decoration:none}
.btn:hover{background:var(--surface);transform:translateY(-1px)}
.btn-primary{background:linear-gradient(135deg,var(--primary) 0%,var(--primary-light) 100%);border-color:var(--primary);color:#fff;box-shadow:0 2px 4px rgba(21,128,61,.2)}
.btn-primary:hover{background:linear-gradient(135deg,var(--primary-light) 0%,var(--accent) 100%);box-shadow:0 4px 8px rgba(21,128,61,.3);transform:translateY(-2px)}
.btn-secondary{background:var(--card);border-color:var(--border-light)}
.btn-icon{padding:10px;min-width:40px}
.btn-send{padding:14px;border-radius:var(--radius)}

/* ========= ERR ========= */
.msg-err{min-height:20px;color:var(--error);font-size:13px;font-weight:500;padding:8px 12px;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);border-radius:var(--radius-sm);display:none}
.msg-err:not(:empty){display:block}

/* ========= LOGIN: registro/link ========= */
/* Estiliza o contêiner "Não tem conta? Criar conta" para centralização e melhor apresentação */
.login-form .login-register-container{
  display:flex;
  justify-content:center;
  gap:6px;
  width:100%;
  font-size:13px;
  color:var(--text-muted);
  margin-top:-6px;
}
/* Estilo para o link de criação de conta */
.login-form .login-register-container a{
  color:var(--primary);
  font-weight:600;
  text-decoration:none;
}
.login-form .login-register-container a:hover{
  text-decoration:underline;
}

/* ========= APP LAYOUT ========= */
.app{height:100vh;display:flex;flex-direction:column}
.topbar{flex:0 0 auto;background:var(--card);border-bottom:1px solid var(--border);padding:12px 16px;display:flex;align-items:center;justify-content:space-between;box-shadow:var(--shadow);z-index:10;height:64px;padding-top:8px;padding-bottom:8px}
.brand{display:flex;align-items:center;gap:10px}
.brand-icon{display:flex;align-items:center;justify-content:center}
.brand-logo{width:90px;height:auto;max-height:48px;object-fit:contain;margin-top:-2px}
.brand-text{display:flex;flex-direction:column}
.brand-name{display:none}
.brand small{color:var(--text-subtle);font-size:12px;margin:0}
.topbar-actions{display:flex;align-items:center;gap:12px}

/* GRID: menu lateral + lista + conteúdo */
.shell{flex:1;display:grid;grid-template-columns:220px 380px 1fr;min-height:0;overflow:hidden}

/* ========= NAV RAIL ========= */
.nav-rail{background:var(--card);border-right:1px solid var(--border);padding:16px 12px;display:flex;flex-direction:column;gap:6px}
.menu-title{padding:6px 8px;color:var(--text-subtle);font-size:11px;font-weight:700;letter-spacing:.06em;text-transform:uppercase;opacity:.85}
.menu-item,.rail-toggle{display:flex;align-items:center;gap:12px;padding:12px 14px;background:transparent;border:1px solid transparent;border-radius:var(--radius);color:var(--text-muted);font-family:var(--font-secondary);font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;text-align:left;width:100%}
.menu-item:hover,.rail-toggle:hover{background:var(--hover);color:var(--text)}
.menu-item.active{background:linear-gradient(135deg,var(--primary) 0%,var(--primary-light) 100%);color:#fff;box-shadow:0 2px 6px rgba(21,128,61,.25)}
.menu-item svg,.rail-toggle svg{flex-shrink:0}

/* Rótulos dentro dos botões do rail */
.nav-rail .label{white-space:nowrap}

/* Rail recolhido */
body.rail-collapsed .shell{grid-template-columns:72px 380px 1fr}
body.rail-collapsed .nav-rail{align-items:center}
body.rail-collapsed .nav-rail .label{display:none}
body.rail-collapsed .rail-toggle{justify-content:center}
body.rail-collapsed .rail-toggle svg{transform:rotate(180deg);transition:transform .2s}

/* ========= SIDEBAR ========= */
.sidebar{background:var(--card);border-right:1px solid var(--border);display:flex;flex-direction:column;overflow:hidden}
.sidebar-head{padding:20px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;background:var(--card-light)}
.sidebar-head h2{margin:0;font-family:var(--font-primary);font-size:18px;font-weight:600;color:var(--text)}
.stats-badge{background:var(--success);color:#fff;padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}

.verification-progress{background:var(--card-light);border-bottom:1px solid var(--border);padding:16px 20px;animation:fadeIn .3s ease;position:relative;z-index:10;display:block!important}
.verification-progress.hidden{display:none!important}
.verification-content{display:flex;flex-direction:column;gap:12px}
.verification-text{display:flex;justify-content:space-between;align-items:center}
.verification-label{font-family:var(--font-primary);font-weight:600;font-size:14px;color:var(--text)}
.verification-counter{font-size:12px;color:var(--text-muted);font-weight:500}
.verification-bar{width:100%;height:4px;background:rgba(255,255,255,.1);border-radius:2px;overflow:hidden}
.verification-fill{height:100%;background:linear-gradient(90deg,var(--primary),var(--primary-light));border-radius:2px;width:0%;transition:width .3s ease;box-shadow:0 0 8px rgba(21,128,61,.3)}

.chat-list{flex:1;overflow-y:auto;padding:8px}

/* ========= CHAT ITEMS ========= */
.chat-item{display:flex;align-items:center;gap:12px;padding:16px 20px;margin-bottom:2px;border-radius:var(--radius);cursor:pointer;transition:all .15s ease;border:1px solid transparent;animation:fadeIn .3s ease;opacity:1}
.chat-item:hover{background:var(--hover)}
.chat-item.active{background:var(--primary-bg);border-left:3px solid var(--primary)}
.avatar{width:44px;height:44px;border-radius:50%;overflow:hidden;background:linear-gradient(135deg,var(--primary) 0%,var(--accent) 100%);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;flex-shrink:0;box-shadow:0 2px 8px rgba(21,128,61,.2)}
.avatar img{width:100%;height:100%;object-fit:cover}
.chat-main{flex:1;min-width:0}
.row1{display:flex;align-items:center;justify-content:space-between;margin-bottom:2px}
.name{font-family:var(--font-primary);font-weight:600;font-size:14px;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;margin-right:8px}
.time{color:var(--text-subtle);font-size:12px;flex-shrink:0}
.row2{display:flex;align-items:center;justify-content:space-between}
.preview{color:var(--text-muted);font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;margin-right:8px}
.badge{background:var(--accent);color:var(--bg);border-radius:12px;min-width:20px;height:20px;display:flex;align-items:center;justify-content:center;padding:0 6px;font-size:11px;font-weight:700;flex-shrink:0}

/* ========= MAIN CHAT ========= */
.main{display:flex;flex-direction:column;overflow:hidden;background:var(--bg)}
.chatbar{background:var(--card);border-bottom:1px solid var(--border);padding:12px 20px;display:flex;align-items:center;gap:16px;box-shadow:var(--shadow);transition:all .2s ease}
.btn.back{display:none}
.chat-info{flex:1;min-width:0;transition:opacity .2s ease}
.chat-title{font-family:var(--font-primary);font-weight:600;font-size:16px;color:var(--text);margin-bottom:4px;transition:color .2s ease}
.chat-status{color:var(--text-subtle);font-size:12px;transition:color .2s ease}
.messages{flex:1;padding:20px;overflow-y:auto;background:var(--bg);transition:opacity .2s ease}
.messages:empty{opacity:.7}
.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;color:var(--text-muted)}
.empty-icon{font-size:64px;margin-bottom:16px;opacity:.5}
.empty-state h3{margin:0 0 8px 0;font-family:var(--font-primary);font-size:18px;color:var(--text)}
.empty-state p{margin:0;color:var(--text-subtle)}

/* ========= MESSAGES ========= */
.msg{max-width:70%;margin-bottom:16px;padding:12px 16px;border-radius:12px;position:relative;word-wrap:break-word;box-shadow:var(--shadow);animation:messageSlideIn .2s ease;opacity:1;transform:translateY(0)}
@keyframes messageSlideIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.msg.me{background:var(--primary);color:#fff;margin-left:auto;border-bottom-right-radius:4px}
.msg.you{background:var(--card);color:var(--text);border-bottom-left-radius:4px}
.msg small{display:block;opacity:.7;margin-top:8px;font-size:11px;font-weight:500}

/* ========= SEND ========= */
.send{background:var(--card);border-top:1px solid var(--border);padding:16px 20px;box-shadow:0 -2px 8px rgba(0,0,0,.1)}
.send-group{display:flex;gap:12px;align-items:flex-end}

/* ========= UTILS ========= */
.hint{padding:20px;color:var(--text-muted);text-align:center;font-style:italic}
.error{padding:20px;color:var(--error);text-align:center;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);border-radius:var(--radius);margin:16px}

/* ========= LOADING ========= */
.loading{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--bg) 0%,#1e293b 100%)}
.loading-container{text-align:center;display:flex;flex-direction:column;align-items:center;gap:16px}
.loading-logos-container{position:relative;width:140px;height:100px;margin-bottom:20px;display:flex;align-items:center;justify-content:center;margin-top:60px}
.loading-logo-luna,.loading-logo-helsenia{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;transform:translateY(40px)}
.loading-logo{width:140px;max-width:90vw;height:auto;filter:drop-shadow(0 0 20px rgba(132,204,22,.35));transition:all .5s ease}
.loading-logo-helsenia .loading-logo{width:120px}

/* esconder contadores no desktop */
.mobile-counters,.sidebar-stats{display:none}

/* ========= SPLASH ========= */
.splash-screen{position:fixed;inset:0;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:40px;z-index:9999;background:linear-gradient(135deg,var(--bg) 0%,#1e293b 100%);transition:opacity .8s ease,transform .8s ease}
.splash-screen.fade-out{opacity:0;transform:scale(.95)}
.splash-logos-container{position:relative;width:200px;height:200px;display:flex;align-items:center;justify-content:center;transform:translateY(20px)}
.splash-logo-luna,.splash-logo-helsenia{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .5s ease}
.splash-logo-luna.active,.splash-logo-helsenia.active{opacity:1}
.splash-logo{width:240px;height:auto;filter:drop-shadow(0 0 20px rgba(132,204,22,.35));transition:all .3s ease}
.splash-logo-luna .splash-logo{width:340px}
.splash-logo-helsenia .splash-logo{width:240px}
.splash-progress-container{width:250px;height:6px;background:rgba(255,255,255,.1);border-radius:3px;overflow:hidden;box-shadow:inset 0 1px 3px rgba(0,0,0,.2)}
.splash-progress-bar{width:0%;height:100%;background:linear-gradient(90deg,#16a34a,#22c55e);border-radius:3px;transition:width 8s linear,background .5s ease;box-shadow:0 0 10px rgba(34,197,94,.5)}
.splash-progress-bar.animate{width:100%}
.splash-progress-bar.helsenia{background:linear-gradient(90deg,#ffd700,#ffed4e);box-shadow:0 0 10px rgba(255,215,0,.5)}

/* ========= MODOS (EXIBIÇÃO POR ABA) ========= */
/* Conversas (padrão): mostra lista e chat; oculta billing */
body.mode-chat .billing-view{display:none!important}

/* Pagamentos: esconde a sidebar/lista e a área de chat, mostra billing ocupando a coluna central */
body.mode-billing .shell{grid-template-columns:220px 1fr}
body.mode-billing .sidebar{display:none}
body.mode-billing .chatbar,
body.mode-billing #messages{display:none}
body.mode-billing #billing-view{display:block}

/* ========= PAGAMENTOS (estilização completa) ========= */
.billing-view{padding:24px;overflow-y:auto;background:var(--bg)}
.billing-header{margin-bottom:24px}
.billing-header h2{margin:0 0 6px;font-family:var(--font-primary);font-size:28px;font-weight:700;color:var(--text)}
.billing-header p{margin:0;color:var(--text-muted)}
.billing-content{display:grid;gap:20px;grid-template-columns:1fr;max-width:900px}
@media (min-width:980px){.billing-content{grid-template-columns:1.1fr .9fr}}

.billing-plan,.billing-status{
  background:var(--card);border:1px solid var(--border);
  border-radius:var(--radius-lg);box-shadow:var(--shadow)
}
.plan-header{
  display:flex;align-items:center;justify-content:space-between;gap:16px;
  padding:18px 20px;border-bottom:1px solid var(--border);
  background:linear-gradient(180deg,rgba(255,255,255,.02),transparent);
  border-top-left-radius:var(--radius-lg);border-top-right-radius:var(--radius-lg)
}
.plan-header h3{margin:0;font-family:var(--font-primary);font-size:20px;font-weight:700;color:var(--text)}
.plan-price{font-family:var(--font-primary);font-size:32px;font-weight:800;color:var(--primary)}
.plan-price span{font-size:14px;font-weight:600;color:var(--text-muted)}
.plan-description{padding:18px 20px;color:var(--text-muted);line-height:1.6}

.billing-status h4{margin:0;padding:18px 20px;border-bottom:1px solid var(--border);font-family:var(--font-primary);font-size:18px;font-weight:700;color:var(--text)}
.status-content{padding:14px 20px;display:flex;flex-direction:column;gap:0}
.status-item{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--border)}
.status-item:last-child{border-bottom:none}
.status-label{color:var(--text-subtle);font-weight:600}
.status-value{color:var(--text);font-weight:700}

.billing-actions{display:flex;gap:12px;padding:16px 20px;border-top:1px solid var(--border)}
#btn-pay-getnet{min-width:220px;background:linear-gradient(135deg,var(--primary) 0%,var(--primary-light) 100%);border-color:var(--primary);color:#fff;box-shadow:0 2px 6px rgba(21,128,61,.25)}
#btn-pay-getnet:hover{transform:translateY(-1px);background:linear-gradient(135deg,var(--primary-light) 0%,var(--accent) 100%)}

/* ========= MOBILE ========= */
.mobile-stage-selector{display:none}
@media (max-width:1023px){
  .shell{grid-template-columns:1fr;overflow-x:hidden}
  .nav-rail{display:none}
  .sidebar{display:none}
  body.is-mobile-list .sidebar{display:flex}
  body.is-mobile-list .main{display:none}
  body.is-mobile-chat .sidebar{display:none}
  body.is-mobile-chat .main{display:flex}
  .stage-tabs,.stage-counters{display:none!important}
  .mobile-stage-selector{display:block}
  .mobile-counters{display:flex}
  .topbar{padding:12px 16px;overflow:hidden;min-height:60px;flex-wrap:nowrap}
  .topbar-actions .btn-text{display:none}
  .topbar-actions .btn{padding:8px;min-width:40px}
  .sidebar-head{padding:16px;display:flex;flex-direction:column;gap:12px}
  .sidebar-head h2{margin:0;font-size:18px}
  .sidebar-stats{display:flex;justify-content:space-between;align-items:center}
  .btn.back{display:inline-flex;min-height:44px;min-width:44px;padding:12px 16px}
  .send{padding:12px 16px}
  .send-group{gap:8px}
  .inp-compact{min-width:100px;flex:0 0 auto}
  .inp-main{flex:1;min-width:0}
  .btn-send{flex:0 0 auto;min-width:44px;min-height:44px;padding:12px}
  .chat-item{padding:12px 16px;min-height:60px}
  .chat-item .avatar{width:40px;height:40px;font-size:14px}
  .chat-main{gap:4px}
  .name{font-size:14px;font-weight:600}
  .preview{font-size:12px;line-height:1.4}
  .time{font-size:12px}
  .messages{padding:12px}
  .msg{max-width:85%;padding:12px 16px;font-size:14px;line-height:1.4}
  .msg small{font-size:11px;margin-top:8px}
  .brand{flex-shrink:0;min-width:0}
  .brand small{font-size:11px}
  .chat-info{min-width:0;flex:1}
  .chat-title{font-family:var(--font-primary);font-weight:600;font-size:16px;color:var(--text);margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
  .chat-status{font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

  .verification-progress{padding:12px 16px}
  .verification-text{flex-direction:column;gap:4px;align-items:flex-start}
  .verification-label{font-size:13px}
  .verification-counter{font-size:11px}
}

/* ========= XS ========= */
@media (max-width:480px){
  .login-card{padding:24px}
  .login-logo img{width:260px}
  .topbar{padding:10px 12px}
  .mobile-counters{padding:6px 12px;gap:8px}
  .counter-item{font-size:11px}
  .send{padding:10px 12px}
  .messages{padding:12px}
  .chat-item{padding:8px;min-height:56px}
}

/* ========= MOBILE SPLASH ========= */
@media (max-width:768px){
  .splash-screen{gap:30px;padding:20px}
  .splash-logos-container{width:300px;height:300px;transform:translateY(15px)}
  .splash-logo{width:200px}
  .splash-logo-luna .splash-logo{width:280px}
  .splash-logo-helsenia .splash-logo{width:200px}
  .splash-progress-container{width:200px;height:5px}
}
@media (max-width:480px){
  .splash-screen{gap:25px;padding:15px}
  .splash-logos-container{width:250px;height:250px;transform:translateY(10px)}
  .splash-logo{width:160px}
  .splash-logo-luna .splash-logo{width:220px}
  .splash-logo-helsenia .splash-logo{width:160px}
  .splash-progress-container{width:180px;height:4px}
}

/* ========= ANIMATIONS ========= */
@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
@keyframes progressFill{0%{width:0}20%{width:15%}40%{width:35%}60%{width:55%}80%{width:80%}100%{width:100%}}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

/* ==== FIX: manter texto do rail visível na aba Pagamentos ==== */
body.mode-billing .nav-rail .label { display: inline !important; }

/* (opcional) garantir largura/ícone do botão de colapsar */
.rail-toggle { width: 100%; }
.rail-toggle svg { width: 16px; height: 16px; }
